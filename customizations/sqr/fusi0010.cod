!*DEBUG FUSI0010.COD

begin-procedure fusi-select-action-##RECNAME## ($emplid, #empl_rcd, $dt_nt_start_date)!*
  !* AREA:              selects relevant actions for ##RECNAME##
  !* GENERATED BY:      gnr-select-action
  !* CALLED BY:         fusi-select-action
  !* CALLS:

let $_sql-statement = $_ReportID || ',fusi-select-action-##RECNAME##,select,##RECNAME##'
begin-select On-Error=SQL-Error
{DATEOUT-PREFIX}EFFDT{DATEOUT-SUFFIX} &EFFDT
EFFSEQ  &EFFSEQ
ACTION  &ACTION
ACTION_REASON &ACTION_REASON
#IFNDEF FUSI_WORK_TABLE
  do fusi-insert-action (&EFFDT, &EFFSEQ, &ACTION, '##RECNAME##')
#ELSE
  do fusi-insert-action-worktable ($emplid, #empl_rcd, &EFFDT, &EFFSEQ, &ACTION, &ACTION_REASON, '##RECNAME##')
#END-IF
from  PS_##RECNAME##
where EMPLID     =  $emplid
AND   EMPL_RCD   =  #empl_rcd
AND   FP_CNL_ROW =  'N'
AND   FP_INST_STAT = 'R'        !SH 19/06/1997 select only real rows
AND   EFFDT      >= {DATEIN-PREFIX}$dt_nt_start_date{DATEIN-SUFFIX}
end-select

end-procedure


!*DEBUG FUSI0010.COD

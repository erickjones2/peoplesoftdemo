!*DEBUG FUSI0008.COD

begin-procedure fusi-select-action ($fusi_emplid, #fusi_empl_rcd, $fusi_dt_nt_start_date)!*
  !* AREA:              calls the individual action select functions for each
  !*                    tracked record
  !* GENERATED BY:      gnr-select-action
  !* CALLED BY:         fusi-init
  !* CALLS:             fusi-select-action-RECNAME

#debug print 'fusi-select-action (' (+1,1)
#debug print $fusi_emplid ()
#debug print ',' ()
#debug print  #fusi_empl_rcd  () edit 99
#debug print ',' ()
#debug print $fusi_dt_nt_start_date ()
#debug print ')' ()


#IFDEF FUSI_WORK_TABLE
!checking if we don't already have data for this emplid, empl_rcd in the worktable.
!if we do, good chance the select actions would cause duplicate key problems,
!so we cancel reading the actions

let #res = 0

let $sql-statement = $ReportID || ',fusi-select-action,Select,FPMWORKTABLE'
begin-select on-error=sql-error
1 &res
 let #res = &res

from PS_FPMWORKTABLE
where EMPLID = $fusi_emplid
and   EMPL_RCD = #fusi_empl_rcd
end-select

if (#res = 1)
  let $disp = 'Data already in worktable for emplid ' || $emplid || ', empl_rcd :' || to_char(#fusi_empl_rcd)
  display $disp
  goto no_select
end-if


#END-IF


!*DEBUG FUSI0008.COD
